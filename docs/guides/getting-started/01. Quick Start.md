# Quick Start Guide - My Personal Map

Guida rapida per avviare My Personal Map in meno di 10 minuti.

## Prerequisiti

- Python 3.9+ (raccomandato 3.11+)
- MySQL 8.0+
- Git

## Installazione Rapida

### 1. Clona il Repository

```bash
git clone https://github.com/tuousername/myPersonalMap.git
cd myPersonalMap
```

### 2. Setup Database MySQL

**Opzione A: Docker (Consigliato)**

```bash
# Avvia MySQL in Docker
docker run -d \
  --name mysql-db-root \
  -e MYSQL_ROOT_PASSWORD=password \
  -p 3306:3306 \
  mysql:8.0

# Crea database e utente
docker exec mysql-db-root mysql -u root -ppassword -e \
  "CREATE DATABASE mypersonalmap; \
   CREATE USER 'mypersonalmap_user'@'%' IDENTIFIED BY 'mypersonalmap_pass'; \
   GRANT ALL PRIVILEGES ON mypersonalmap.* TO 'mypersonalmap_user'@'%'; \
   FLUSH PRIVILEGES;"
```

**Opzione B: MySQL Nativo**

```bash
# Accedi a MySQL
mysql -u root -p

# Esegui questi comandi SQL
CREATE DATABASE mypersonalmap CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'mypersonalmap_user'@'localhost' IDENTIFIED BY 'mypersonalmap_pass';
GRANT ALL PRIVILEGES ON mypersonalmap.* TO 'mypersonalmap_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

### 3. Configura Ambiente Python

```bash
# Crea virtual environment
python3 -m venv venv

# Attiva virtual environment
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate   # Windows

# Installa dipendenze
pip install -r pymypersonalmap/requirements.txt
```

### 4. Configura File .env

```bash
# Copia il template
cp .env.example .env

# La configurazione di default funziona gi√† con Docker!
# Se hai usato Docker con le credenziali di default, non serve modificare nulla
```

Il file `.env` viene creato automaticamente con:
- Password database: `mypersonalmap_pass`
- Secret key sicuro generato automaticamente
- Configurazioni ottimali per sviluppo

**Nota**: Se hai usato credenziali diverse, modifica manualmente il file `.env`.

### 5. Avvia l'Applicazione

**Avvio Completo (GUI + Backend)** - Raccomandato:

```bash
# Dalla root del progetto
PYTHONPATH=$(pwd) python3 pymypersonalmap/main.py
```

**Solo Backend (per sviluppo API)**:

```bash
# Opzione 1: Dalla root con flag
PYTHONPATH=$(pwd) python3 pymypersonalmap/main.py --backend-only

# Opzione 2: Dalla directory pymypersonalmap
cd pymypersonalmap && python3 main.py
```

Output atteso (GUI + Backend):
```
Starting GUI application (includes backend)...
2025-12-15 18:24:19 - INFO - Database configured with 4 tables
2025-12-15 18:24:19 - INFO - Starting backend server...
2025-12-15 18:24:20 - INFO - Backend started successfully
2025-12-15 18:24:20 - INFO - Database already initialized (4 tables)
2025-12-15 18:24:20 - INFO - Application started successfully
```

**Il database viene inizializzato automaticamente al primo avvio!**
- Creazione tabelle automatica
- 10 system labels preconfigurate
- Nessuna migration manuale necessaria

## Verifica Installazione

### Test API

Apri il browser e visita:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Health Check**: http://localhost:8000/health

Dovresti vedere la documentazione interattiva dell'API.

### Test con curl

```bash
# Health check
curl http://localhost:8000/health

# Risposta attesa:
# {
#   "status": "healthy",
#   "version": "1.0.0",
#   "message": "My Personal Map API is running"
# }
```

## Stato Attuale del Progetto

L'applicazione ha completato le fasi 1 e 2:

- ‚úÖ **Backend Completo**: FastAPI REST API con SQLAlchemy, auto-inizializzazione database
- ‚úÖ **GUI Desktop**: CustomTkinter con mappa Folium integrata, backend manager
- ‚úÖ **Database**: MySQL con spatial types, 10 system labels preconfigurate
- ‚è≥ **In Sviluppo**: CRUD completo markers via GUI, geocoding, filtri
- üìã **Pianificato**: Import/Export, route planning, statistiche

Vedi [02. Development Roadmap](../02.%20Planning/02.%20Development%20Roadmap.md) per il piano completo di sviluppo.

## Prossimi Passi

1. Segui il [Development Roadmap](../02.%20Planning/02.%20Development%20Roadmap.md) per implementare le funzionalit√†
2. Consulta [02. Setup Guide](02.%20Setup%20Guide.md) per dettagli avanzati
3. Leggi [01. Architecture](../03.%20Architecture/01.%20Architecture.md) per comprendere l'architettura

## Troubleshooting Rapido

### Errore: Port 8000 already in use

```bash
# Linux/macOS
lsof -i :8000
kill -9 <PID>

# Windows
netstat -ano | findstr :8000
taskkill /PID <PID> /F

# Oppure usa porta diversa
uvicorn main:app --reload --port 8001
```

### Errore: MySQL Connection Failed

```bash
# Verifica MySQL attivo
sudo systemctl status mysql  # Linux
brew services list           # macOS

# Test connessione
mysql -u mypersonalmap_user -p -h localhost

# Verifica .env DATABASE_URL
cat .env | grep DATABASE_URL
```

### Errore: ModuleNotFoundError

```bash
# Verifica virtual environment attivo
which python  # Dovrebbe puntare a venv/bin/python

# Reinstalla requirements
pip install -r requirements.txt --upgrade
```

### Errore: Import GDAL/Fiona

**Linux**:
```bash
sudo apt install gdal-bin libgdal-dev
pip install GDAL==$(gdal-config --version)
```

**macOS**:
```bash
brew install gdal
pip install --upgrade --force-reinstall fiona
```

**Windows**:
```bash
pip install pipwin
pipwin install gdal
pipwin install fiona
```

## Supporto

Per problemi pi√π complessi, consulta:
- [02. Setup Guide](02.%20Setup%20Guide.md) - Guida completa con troubleshooting esteso
- [GitHub Issues](https://github.com/tuousername/myPersonalMap/issues)
- Documentazione completa in `doc/`

## Sviluppo

### Eseguire i Test

```bash
# Quando disponibili
pytest
pytest --cov=pymypersonalmap
```

### Formattazione Codice

```bash
# Formatta con black
black pymypersonalmap/

# Lint con flake8
flake8 pymypersonalmap/
```

### Modalit√† Debug

L'applicazione √® gi√† in modalit√† debug per default. Per maggiori log:

```bash
LOG_LEVEL=DEBUG python main.py
```

## Note Importanti

1. **Secret Key**: Genera sempre una nuova secret key per produzione
2. **Database**: Cambia la password di default in produzione
3. **CORS**: Aggiorna `CORS_ORIGINS` in .env per ambienti specifici
4. **Geocoding**: Nominatim richiede 1 sec tra richieste (rispetta rate limit)

## Comandi Rapidi di Riferimento

```bash
# Attiva virtual environment
source venv/bin/activate

# Avvia server sviluppo
cd pymypersonalmap && python main.py

# Avvia con hot reload
uvicorn main:app --reload

# Run tests
pytest

# Format code
black pymypersonalmap/

# Genera migration (quando disponibile)
alembic revision --autogenerate -m "description"

# Applica migration
alembic upgrade head
```
